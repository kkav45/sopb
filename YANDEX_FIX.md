# üîß –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫–∞

## üìã –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã (QA –ê–Ω–∞–ª–∏–∑)

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –õ–æ–∂–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
**–°–∏–º–ø—Ç–æ–º:** –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è ¬´‚úì –ü–æ–¥–∫–ª—é—á–µ–Ω–æ¬ª, –Ω–æ –æ–∫–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –Ø–Ω–¥–µ–∫—Å–∞ –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è.

**–ü—Ä–∏—á–∏–Ω–∞:** –¢–æ–∫–µ–Ω —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `localStorage` –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å—á–∏—Ç–∞–µ—Ç –µ–≥–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º –±–µ–∑ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏.

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –ù–µ–ª—å–∑—è –æ—Ç–∫–ª—é—á–∏—Ç—å—Å—è
**–°–∏–º–ø—Ç–æ–º:** –ö–Ω–æ–ø–∫–∞ ¬´üö´ –û—Ç–∫–ª—é—á–∏—Ç—å—Å—è¬ª –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–µ–≤–µ—Ä–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ.

**–ü—Ä–∏—á–∏–Ω–∞:** UI –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `isAuthenticated()`, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–ª `true` –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ API.

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
**–°–∏–º–ø—Ç–æ–º:** –°—Ç–∞—Ç—É—Å ¬´–õ–æ–∫–∞–ª—å–Ω–æ¬ª, –¥–∞–Ω–Ω—ã–µ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –Ω–∞ –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫.

**–ü—Ä–∏—á–∏–Ω–∞:** –¢–æ–∫–µ–Ω –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ—Å—Ä–æ—á–µ–Ω, –Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –ø—ã—Ç–∞—Ç—å—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ.

---

## ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. –†–∞–∑–¥–µ–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

**`isAuthenticated()`** ‚Äî –±—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª—è UI:
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ —Ç–æ–∫–µ–Ω–∞
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è
- –ù–µ –¥–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ API (–±—ã—Å—Ç—Ä–æ –¥–ª—è UI)

**`validateTokenWithAPI()`** ‚Äî –ø–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:
- –î–µ–ª–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å –∫ –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫ API
- –ü—Ä–∏ –æ—à–∏–±–∫–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç —Ç–æ–∫–µ–Ω
- –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ —Ç–æ–∫–µ–Ω –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω

### 2. –£–ª—É—á—à–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π

| –°–æ—Å—Ç–æ—è–Ω–∏–µ | –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä | –ö–Ω–æ–ø–∫–∏ |
|-----------|-----------|--------|
| **–ù–µ –ø–æ–¥–∫–ª—é—á—ë–Ω** | üî¥ –ù–µ –ø–æ–¥–∫–ª—é—á—ë–Ω | üîó –ü–æ–¥–∫–ª—é—á–∏—Ç—å |
| **–¢—Ä–µ–±—É–µ—Ç—Å—è –≤—Ö–æ–¥** | ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è –≤—Ö–æ–¥ | üîó –ü–æ–¥–∫–ª—é—á–∏—Ç—å, üö´ –û—Ç–∫–ª—é—á–∏—Ç—å—Å—è |
| **–ü–æ–¥–∫–ª—é—á–µ–Ω–æ** | ‚úì –ü–æ–¥–∫–ª—é—á–µ–Ω–æ | üö´ –û—Ç–∫–ª—é—á–∏—Ç—å—Å—è |

### 3. –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

```
[YandexDisk] Not authenticated: no token
[YandexDisk] Token expired
[YandexDisk] Token expiring soon
[YandexDisk] API validation failed: ...
[SyncManager] Yandex Disk API validation: true/false
```

---

## üß™ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

### –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–∂–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://kkav45.github.io/sopb/
2. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å (F12)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
[YandexDisk] Not authenticated: no token
```

**–°—Ç–∞—Ç—É—Å –≤ UI:** üî¥ –ù–µ –ø–æ–¥–∫–ª—é—á—ë–Ω

### –¢–µ—Å—Ç 2: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫–∞

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** ‚Üí **–Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫**
2. –ù–∞–∂–º–∏—Ç–µ **üîó –ü–æ–¥–∫–ª—é—á–∏—Ç—å –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫**
3. –†–∞–∑—Ä–µ—à–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –¥–æ—Å—Ç—É–ø
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å:

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
[YandexDisk] Auth URL: https://oauth.yandex.ru/authorize?...
[YandexDisk] Token saved
[SyncManager] Yandex Disk API validation: true
```

**–°—Ç–∞—Ç—É—Å –≤ UI:** ‚úì –ü–æ–¥–∫–ª—é—á–µ–Ω–æ

### –¢–µ—Å—Ç 3: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

1. –ù–∞–∂–º–∏—Ç–µ **üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å**
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å:

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
[SyncManager] Creating root folder ASOPB...
[YandexDisk] Creating folder: disk:/ASOPB
[SyncManager] Root folder created/verified
[SyncManager] Pending sync items: X
[SyncManager] Uploaded: objects/obj-xxx.json
```

**–°—Ç–∞—Ç—É—Å –≤ UI:** ‚úì –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ

### –¢–µ—Å—Ç 4: –û—Ç–∫–ª—é—á–µ–Ω–∏–µ

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** ‚Üí **–Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫**
2. –ù–∞–∂–º–∏—Ç–µ **üö´ –û—Ç–∫–ª—é—á–∏—Ç—å—Å—è**
3. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
[YandexDisk] Token cleared
```

**–°—Ç–∞—Ç—É—Å –≤ UI:** üî¥ –ù–µ –ø–æ–¥–∫–ª—é—á—ë–Ω

### –¢–µ—Å—Ç 5: –ü—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å
2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ:
```javascript
// –ò–º–∏—Ç–∞—Ü–∏—è –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞
const token = JSON.parse(localStorage.getItem('yandex-disk-token'));
token.expiresAt = Date.now() - 1000; // 1 —Å–µ–∫—É–Ω–¥—É –Ω–∞–∑–∞–¥
localStorage.setItem('yandex-disk-token', JSON.stringify(token));
location.reload();
```

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ UI –∏ –∫–æ–Ω—Å–æ–ª—å

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
[YandexDisk] Token expired
```

**–°—Ç–∞—Ç—É—Å –≤ UI:** ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è –≤—Ö–æ–¥

---

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞

–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```javascript
// 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Ç–æ–∫–µ–Ω–∞
console.log('Token:', localStorage.getItem('yandex-disk-token'));

// 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–∏—Å–∞
console.log('Yandex Disk:', window.yandexDisk);

// 3. –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
window.yandexDisk.isAuthenticated().then(result => {
  console.log('isAuthenticated:', result);
});

// 4. –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ API
window.yandexDisk.validateTokenWithAPI().then(result => {
  console.log('validateTokenWithAPI:', result);
});

// 5. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–∫–µ–Ω–µ
console.log('Token info:', window.yandexDisk.getTokenInfo());
```

### –û—á–∏—Å—Ç–∫–∞ —Ç–æ–∫–µ–Ω–∞

–ï—Å–ª–∏ —Ç–æ–∫–µ–Ω –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω:

```javascript
// –û—á–∏—Å—Ç–∏—Ç—å —Ç–æ–∫–µ–Ω
localStorage.removeItem('yandex-disk-token');
location.reload();
```

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

| –§–∞–π–ª | –ò–∑–º–µ–Ω–µ–Ω–∏—è |
|------|-----------|
| `yandex-disk.service.js` | +50 —Å—Ç—Ä–æ–∫ (–≤–∞–ª–∏–¥–∞—Ü–∏—è, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ) |
| `sync-manager.service.js` | +10 —Å—Ç—Ä–æ–∫ (API –≤–∞–ª–∏–¥–∞—Ü–∏—è) |
| `main.js` | +30 —Å—Ç—Ä–æ–∫ (UI —Å–æ—Å—Ç–æ—è–Ω–∏—è) |

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏

- [ ] –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –±–µ–∑ —Ç–æ–∫–µ–Ω–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è ¬´üî¥ –ù–µ –ø–æ–¥–∫–ª—é—á—ë–Ω¬ª
- [ ] –ü–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è ¬´‚úì –ü–æ–¥–∫–ª—é—á–µ–Ω–æ¬ª
- [ ] –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º —Ç–æ–∫–µ–Ω–æ–º
- [ ] –ö–Ω–æ–ø–∫–∞ ¬´üö´ –û—Ç–∫–ª—é—á–∏—Ç—å—Å—è¬ª –æ—á–∏—â–∞–µ—Ç —Ç–æ–∫–µ–Ω
- [ ] –ü—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç ¬´‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è –≤—Ö–æ–¥¬ª
- [ ] –í –∫–æ–Ω—Å–æ–ª–∏ –µ—Å—Ç—å –ª–æ–≥–∏ –¥–ª—è –≤—Å–µ—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å (F12)
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ª–æ–≥–∏ —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `[YandexDisk]` –∏ `[SyncManager]`
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –ª–æ–≥–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
