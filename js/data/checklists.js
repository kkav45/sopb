// js/data/checklists.js

// Библиотека чек-листов для проверок оборудования
const CHECKLISTS = {
  // Извещатель дымовой
  'ЧЛ-02-01-001-001': {
    id: 'ЧЛ-02-01-001-001',
    name: 'Извещатель дымовой — Ежеквартальный осмотр',
    type: 'quarterly',
    equipmentType: '02-01-001',
    items: [
      {
        id: 1,
        title: 'Визуальный осмотр корпуса',
        method: 'Осмотр на повреждения, загрязнения',
        tool: 'Фонарь, стремянка',
        criteria: 'Корпус без трещин, загрязнений'
      },
      {
        id: 2,
        title: 'Проверка крепления',
        method: 'Контроль надёжности установки',
        tool: '—',
        criteria: 'Извещатель закреплён надёжно, без люфта'
      },
      {
        id: 3,
        title: 'Проверка индикации',
        method: 'Контроль светодиодного индикатора',
        tool: 'Фонарь',
        criteria: 'Индикатор мигает в дежурном режиме'
      },
      {
        id: 4,
        title: 'Проверка маркировки',
        method: 'Контроль номера на корпусе',
        tool: '—',
        criteria: 'Номер соответствует исполнительной схеме'
      },
      {
        id: 5,
        title: 'Очистка от пыли',
        method: 'Аккуратная очистка корпуса и камеры',
        tool: 'Ветошь, кисть',
        criteria: 'Камера чистая, без пыли'
      }
    ]
  },
  
  // Извещатель тепловой
  'ЧЛ-02-01-004-001': {
    id: 'ЧЛ-02-01-004-001',
    name: 'Извещатель тепловой — Годовая проверка',
    type: 'annual',
    equipmentType: '02-01-004',
    items: [
      {
        id: 1,
        title: 'Визуальный осмотр',
        method: 'Осмотр корпуса, крепления',
        tool: 'Фонарь, стремянка',
        criteria: 'Корпус без повреждений, крепление надёжное'
      },
      {
        id: 2,
        title: 'Нагрев чувствительного элемента',
        method: 'Нагрев до температуры срабатывания',
        tool: 'Тепловой фен с терморегулятором',
        criteria: 'Срабатывание при +54…+78°C'
      },
      {
        id: 3,
        title: 'Замер времени срабатывания',
        method: 'Фиксация времени от начала нагрева',
        tool: 'Секундомер',
        criteria: 'Время срабатывания ≤60 сек'
      },
      {
        id: 4,
        title: 'Проверка передачи сигнала',
        method: 'Контроль поступления сигнала на ППК',
        tool: 'ППК',
        criteria: 'Сигнал отображается на табло'
      }
    ]
  },
  
  // Огнетушитель
  'ЧЛ-02-05-001-001': {
    id: 'ЧЛ-02-05-001-001',
    name: 'Огнетушитель — Ежеквартальный осмотр',
    type: 'quarterly',
    equipmentType: '02-05-001',
    items: [
      {
        id: 1,
        title: 'Внешний осмотр корпуса',
        method: 'Осмотр на вмятины, коррозию',
        tool: 'Визуально',
        criteria: 'Нет вмятин, коррозия не сквозная'
      },
      {
        id: 2,
        title: 'Проверка чеки и пломбы',
        method: 'Контроль целостности',
        tool: '—',
        criteria: 'Чека на месте, пломба цела'
      },
      {
        id: 3,
        title: 'Проверка шланга и ЗПУ',
        method: 'Осмотр шланга, запорно-пускового устройства',
        tool: '—',
        criteria: 'Шланг без трещин, ЗПУ исправно'
      },
      {
        id: 4,
        title: 'Контроль давления (для закачных)',
        method: 'Проверка манометра',
        tool: 'Визуально',
        criteria: 'Стрелка в зелёной зоне'
      },
      {
        id: 5,
        title: 'Проверка массы',
        method: 'Взвешивание',
        tool: 'Весы',
        criteria: 'Масса соответствует паспорту (±5%)'
      }
    ]
  },
  
  // Пожарный кран
  'ЧЛ-02-05-008-001': {
    id: 'ЧЛ-02-05-008-001',
    name: 'Пожарный кран — Полугодовая проверка',
    type: 'semiannual',
    equipmentType: '02-05-008',
    items: [
      {
        id: 1,
        title: 'Проверка комплектности',
        method: 'Сверка с табличкой',
        tool: '—',
        criteria: 'Все компоненты на месте'
      },
      {
        id: 2,
        title: 'Проливка крана',
        method: 'Открытие вентиля, замер параметров',
        tool: 'Манометр, мерная ёмкость',
        criteria: 'Напор и расход по проекту'
      },
      {
        id: 3,
        title: 'Проверка рукава',
        method: 'Осмотр на повреждения',
        tool: '—',
        criteria: 'Нет заломов, повреждений'
      },
      {
        id: 4,
        title: 'Перекатка рукава',
        method: 'Раскладка, новая складка',
        tool: '—',
        criteria: 'Рукав перекатан правильно'
      }
    ]
  },
  
  // Дверь противопожарная
  'ЧЛ-02-06-001-001': {
    id: 'ЧЛ-02-06-001-001',
    name: 'Дверь противопожарная — Ежемесячная проверка',
    type: 'monthly',
    equipmentType: '02-06-001',
    items: [
      {
        id: 1,
        title: 'Плотность притвора',
        method: 'Тест с листом бумаги А4',
        tool: 'Лист А4',
        criteria: 'Лист не вынимается без усилия (зазор ≤3 мм)'
      },
      {
        id: 2,
        title: 'Работа доводчика',
        method: 'Замер времени закрывания',
        tool: 'Секундомер',
        criteria: '5–30 сек, без ударов'
      },
      {
        id: 3,
        title: 'Проверка уплотнителей',
        method: 'Осмотр интумесцентных лент',
        tool: 'Фонарь, лупа',
        criteria: 'Уплотнители по периметру, без разрывов'
      },
      {
        id: 4,
        title: 'Свободное открывание',
        method: 'Измерение усилия открывания',
        tool: 'Динамометр',
        criteria: 'Усилие ≤100 Н (10 кгс)'
      }
    ]
  },
  
  // Вентилятор противодымный
  'ЧЛ-01-01-004-001': {
    id: 'ЧЛ-01-01-004-001',
    name: 'Вентилятор противодымный — Ежемесячный осмотр',
    type: 'monthly',
    equipmentType: '01-01-004',
    items: [
      {
        id: 1,
        title: 'Осмотр корпуса',
        method: 'Визуальный осмотр на повреждения',
        tool: 'Фонарь',
        criteria: 'Нет коррозии >10%, вмятин'
      },
      {
        id: 2,
        title: 'Проверка крепления',
        method: 'Контроль крепёжных болтов',
        tool: 'Ключ гаечный',
        criteria: 'Все болты затянуты, нет люфта'
      },
      {
        id: 3,
        title: 'Проверка электропроводки',
        method: 'Осмотр кабеля, клемм',
        tool: 'Фонарь',
        criteria: 'Изоляция без повреждений'
      },
      {
        id: 4,
        title: 'Проверка гибких вставок',
        method: 'Осмотр вибровставок',
        tool: 'Фонарь',
        criteria: 'Нет разрывов, трещин'
      }
    ]
  }
};

// Справочник нарушений КоАП
const KOAP_VIOLATIONS = {
  '20.4 ч.1': {
    article: '20.4',
    part: 'ч.1',
    title: 'Нарушение требований пожарной безопасности',
    description: 'Нарушение требований ПБ без последствий',
    sanctions: {
      individual: 'от 5 000 до 10 000 руб.',
      official: 'от 20 000 до 30 000 руб.',
      legal: 'от 150 000 до 200 000 руб.'
    }
  },
  '20.4 ч.6': {
    article: '20.4',
    part: 'ч.6',
    title: 'Нарушение в условиях особого режима',
    description: 'Нарушение требований ПБ в условиях особого противопожарного режима',
    sanctions: {
      individual: 'от 10 000 до 15 000 руб.',
      official: 'от 30 000 до 40 000 руб.',
      legal: 'от 200 000 до 400 000 руб.'
    }
  },
  '20.4 ч.12': {
    article: '20.4',
    part: 'ч.12',
    title: 'Нарушение, повлекшее пожар',
    description: 'Нарушение, повлекшее возникновение пожара и уничтожение/повреждение имущества либо причинение лёгкого/средней тяжести вреда здоровью',
    sanctions: {
      individual: 'от 40 000 до 50 000 руб.',
      official: 'от 80 000 до 100 000 руб.',
      legal: 'от 400 000 до 800 000 руб.'
    }
  },
  '20.4 ч.13': {
    article: '20.4',
    part: 'ч.13',
    title: 'Нарушение с тяжкими последствиями',
    description: 'Нарушение, повлекшее причинение тяжкого вреда здоровью или смерть человека',
    sanctions: {
      individual: 'от 60 000 до 80 000 руб.',
      official: 'от 100 000 до 150 000 руб.',
      legal: 'от 600 000 до 1 500 000 руб. или приостановление до 90 суток'
    }
  },
  '19.5 ч.1': {
    article: '19.5',
    part: 'ч.1',
    title: 'Невыполнение предписания',
    description: 'Невыполнение в установленный срок предписания органа ГПН',
    sanctions: {
      individual: 'от 300 до 500 руб.',
      official: 'от 3 000 до 5 000 руб.',
      legal: 'от 50 000 до 200 000 руб.'
    }
  }
};

// Шаблоны актов
const ACT_TEMPLATES = {
  quarterly: {
    title: 'АКТ ЕЖЕКВАРТАЛЬНОЙ ПРОВЕРКИ РАБОТОСПОСОБНОСТИ ОБОРУДОВАНИЯ',
    sections: [
      { title: 'Общие сведения', fields: ['objectName', 'equipmentName', 'equipmentType', 'location'] },
      { title: 'Комиссия', fields: ['commissionMembers'] },
      { title: 'Результаты проверки', fields: ['checklistResults'] },
      { title: 'Выявленные нарушения', fields: ['violations'] },
      { title: 'Рекомендации', fields: ['recommendations'] }
    ]
  },
  annual: {
    title: 'АКТ ЕЖЕГОДНОЙ ПРОВЕРКИ СИСТЕМ ПОЖАРНОЙ БЕЗОПАСНОСТИ',
    sections: [
      { title: 'Общие сведения', fields: ['objectName', 'equipmentName', 'equipmentType', 'location'] },
      { title: 'Комиссия', fields: ['commissionMembers'] },
      { title: 'Результаты инструментального контроля', fields: ['instrumentResults'] },
      { title: 'Выявленные нарушения', fields: ['violations'] },
      { title: 'Рекомендации по устранению', fields: ['recommendations'] }
    ]
  }
};

// Экспорт для использования
window.CHECKLISTS = CHECKLISTS;
window.KOAP_VIOLATIONS = KOAP_VIOLATIONS;
window.ACT_TEMPLATES = ACT_TEMPLATES;
